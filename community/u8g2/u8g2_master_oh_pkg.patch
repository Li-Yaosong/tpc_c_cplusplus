--- u8g2-master/sys/arm-linux/Makefile	2024-12-31 12:51:09.885678178 +0800
+++ u8g2-master/sys/arm-linux/Makefile	2024-12-31 12:51:09.881678185 +0800
@@ -21,3 +21,12 @@
 
 upload:
 	scp $(OUTDIR)/* $(PI):~/
+
+PREFIX=./installFiles
+BINDIR=$(PREFIX)/bin
+install:all
+	@echo "Installing Dev Operating System."
+	# 创建安装目录
+	install -d $(BINDIR)
+	# 安装可执行文件
+	cp -r $(TARGET) $(BINDIR)
--- u8g2-master/CMakeLists.txt	2024-12-23 04:46:07.000000000 +0800
+++ u8g2-master/CMakeLists.txt	2025-04-14 20:48:30.462353247 +0800
@@ -10,6 +10,21 @@
 endif()
 
 project(u8g2)
+# 添加架构相关的编译选项
+if(CMAKE_SYSTEM_PROCESSOR STREQUAL "arm")
+    message("arm")
+    if(NOT CMAKE_C_FLAGS MATCHES "-march=armv7-a" OR NOT CMAKE_CXX_FLAGS MATCHES "-march=armv7-a")
+        add_compile_options(-march=armv7-a -mfpu=vfpv3 -mfloat-abi=softfp)
+    endif()
+elseif(CMAKE_SYSTEM_PROCESSOR STREQUAL "aarch64")
+    message("aarch64")
+    if(NOT CMAKE_C_FLAGS MATCHES "-march=armv8-a" OR NOT CMAKE_CXX_FLAGS MATCHES "-march=armv8-a")
+        add_compile_options(-march=armv8-a -mfloat-abi=soft)
+    endif()
+else()
+    message(WARNING "Unknown architecture: ${CMAKE_SYSTEM_PROCESSOR}")
+endif()
+
 
 if(COMMAND register_component)
     set(COMPONENT_NAME ".")
@@ -31,3 +46,5 @@
 
 install(FILES ${u8g2_SOURCE_DIR}/pkg/u8g2-config.cmake
         DESTINATION lib/cmake/u8g2)
+enable_testing()
+add_subdirectory(test)
--- u8g2-master/test/CMakeLists.txt	1970-01-01 08:00:00.000000000 +0800
+++ u8g2-master/test/CMakeLists.txt	2025-04-14 20:57:51.589196724 +0800
@@ -0,0 +1,6 @@
+enable_testing()
+
+add_executable(test_draw test_draw.c)
+target_link_libraries(test_draw PRIVATE u8g2)
+
+add_test(NAME DrawTest COMMAND test_draw)
\ 文件尾没有换行符
--- u8g2-master/test/test_draw.c	1970-01-01 08:00:00.000000000 +0800
+++ u8g2-master/test/test_draw.c	2025-04-14 20:57:58.829181678 +0800
@@ -0,0 +1,45 @@
+#include "u8g2.h"
+#include <stdio.h>
+#include <string.h>
+uint8_t dummy_byte_cb(u8x8_t *u8x8, uint8_t msg, uint8_t arg_int, void *arg_ptr) {
+    (void)u8x8;
+    (void)msg;
+    (void)arg_int;
+    (void)arg_ptr;
+    return 1;
+}
+
+uint8_t dummy_gpio_and_delay_cb(u8x8_t *u8x8, uint8_t msg, uint8_t arg_int, void *arg_ptr) {
+    (void)u8x8;
+    (void)msg;
+    (void)arg_int;
+    (void)arg_ptr;
+    return 1;
+}
+
+void dummy_draw_hvline_cb(u8g2_t *u8g2, u8g2_uint_t x, u8g2_uint_t y, u8g2_uint_t len, uint8_t dir) {
+    printf("Draw HVLine: x=%d y=%d len=%d dir=%d\n", x, y, len, dir);
+}
+
+int main(void) {
+    u8g2_t u8g2;
+    uint8_t buffer[128] = {0};
+    u8g2_Setup_null(&u8g2, &u8g2_cb_r0, dummy_byte_cb, dummy_gpio_and_delay_cb);
+    u8g2_SetupBuffer(&u8g2, buffer, 1, dummy_draw_hvline_cb, &u8g2_cb_r0);
+
+    // 初始化和开启显示
+    u8g2_InitDisplay(&u8g2);
+    u8g2_SetPowerSave(&u8g2, 0);
+
+    // 清空缓冲区
+    u8g2_ClearBuffer(&u8g2);
+
+    // 测试绘制内容
+    u8g2_DrawBox(&u8g2, 10, 10, 20, 5);
+
+    // 模拟刷新
+    u8g2_SendBuffer(&u8g2);
+
+    printf("Minimal u8g2 test completed.\n");
+    return 0;
+}
