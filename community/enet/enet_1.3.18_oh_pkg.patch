--- enet-1.3.18/CMakeLists.txt	2024-04-15 11:06:53.000000000 +0800
+++ enet-1.3.18/CMakeLists.txt	2025-05-18 23:31:47.882156634 +0800
@@ -93,6 +93,13 @@
     target_link_libraries(enet winmm ws2_32)
 endif()
 
+# 启用测试功能
+include(CTest)
+enable_testing()
+
+# 添加 tests 子目录
+add_subdirectory(tests)
+
 install(TARGETS enet
     RUNTIME DESTINATION bin
     ARCHIVE DESTINATION lib/static
--- enet-1.3.18/tests/CMakeLists.txt	1970-01-01 08:00:00.000000000 +0800
+++ enet-1.3.18/tests/CMakeLists.txt	2025-05-18 23:30:59.638216535 +0800
@@ -0,0 +1,5 @@
+add_executable(enet_test enet_test.c)
+target_include_directories(enet_test PRIVATE ${PROJECT_SOURCE_DIR}/enet/include)
+target_link_libraries(enet_test PRIVATE enet)
+
+add_test(NAME enet_test COMMAND enet_test)
--- enet-1.3.18/tests/enet_test.c	1970-01-01 08:00:00.000000000 +0800
+++ enet-1.3.18/tests/enet_test.c	2025-05-18 23:34:04.353986872 +0800
@@ -0,0 +1,36 @@
+#include <stdio.h>
+#include <stdlib.h>
+#include <enet/enet.h>
+
+int main(int argc, char **argv) {
+    // 初始化 ENet 库
+    if (enet_initialize() != 0) {
+        fprintf(stderr, "An error occurred while initializing ENet.\n");
+        return EXIT_FAILURE;
+    }
+    atexit(enet_deinitialize);
+
+    printf("ENet initialized successfully.\n");
+
+    // 创建一个 ENet 地址
+    ENetAddress address;
+    address.host = ENET_HOST_ANY;
+    address.port = 1234;
+
+    printf("Address created with port: %u\n", address.port);
+
+    // 初始化 ENet 包
+    ENetPacket *packet = enet_packet_create("Hello ENet", strlen("Hello ENet") + 1, ENET_PACKET_FLAG_RELIABLE);
+    if (packet == NULL) {
+        fprintf(stderr, "Failed to create packet.\n");
+        return EXIT_FAILURE;
+    }
+
+    printf("Packet created with data: %s\n", (char *)packet->data);
+
+    // 清理资源
+    enet_packet_destroy(packet);
+
+    printf("Test completed successfully.\n");
+    return EXIT_SUCCESS;
+}
