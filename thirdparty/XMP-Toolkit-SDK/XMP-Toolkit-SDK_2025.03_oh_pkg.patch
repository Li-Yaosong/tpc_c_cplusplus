diff --git a/XMPCore/build/CMakeListsCommon.txt b/XMPCore/build/CMakeListsCommon.txt
index db06d91..939cacc 100644
--- a/XMPCore/build/CMakeListsCommon.txt
+++ b/XMPCore/build/CMakeListsCommon.txt
@@ -276,7 +276,7 @@ if(UNIX)
 			else()
 				add_custom_command (TARGET ${TARGET_NAME}
 					POST_BUILD
-					COMMAND strip ${OUTPUT_DIR}/lib${XMPCORE_LIB}.so
+					COMMAND $<IF:${OHOS},llvm-strip,strip> ${OUTPUT_DIR}/lib${XMPCORE_LIB}.so
 					COMMAND ls -l ${OUTPUT_DIR}/lib${XMPCORE_LIB}.so
 				)
 			endif()
diff --git a/XMPCore/resource/ohos/XMPCore.exp b/XMPCore/resource/ohos/XMPCore.exp
new file mode 100644
index 0000000..1e47310
--- /dev/null
+++ b/XMPCore/resource/ohos/XMPCore.exp
@@ -0,0 +1,111 @@
+VERSION {
+global:
+
+	WXMPMeta_GetVersionInfo_1;
+	WXMPMeta_Initialize_1;
+	WXMPMeta_Terminate_1;
+
+	WXMPMeta_CTor_1;
+	WXMPMeta_IncrementRefCount_1;
+	WXMPMeta_DecrementRefCount_1;
+
+	WXMPMeta_GetGlobalOptions_1;
+	WXMPMeta_SetGlobalOptions_1;
+	WXMPMeta_DumpNamespaces_1;
+	WXMPMeta_RegisterNamespace_1;
+	WXMPMeta_GetNamespacePrefix_1;
+	WXMPMeta_GetNamespaceURI_1;
+	WXMPMeta_DeleteNamespace_1;
+
+	WXMPMeta_GetProperty_1;
+	WXMPMeta_GetArrayItem_1;
+	WXMPMeta_GetStructField_1;
+	WXMPMeta_GetQualifier_1;
+	WXMPMeta_SetProperty_1;
+	WXMPMeta_SetArrayItem_1;
+	WXMPMeta_AppendArrayItem_1;
+	WXMPMeta_SetStructField_1;
+	WXMPMeta_SetQualifier_1;
+	WXMPMeta_DeleteProperty_1;
+	WXMPMeta_DeleteArrayItem_1;
+	WXMPMeta_DeleteStructField_1;
+	WXMPMeta_DeleteQualifier_1;
+	WXMPMeta_DoesPropertyExist_1;
+	WXMPMeta_DoesArrayItemExist_1;
+	WXMPMeta_DoesStructFieldExist_1;
+	WXMPMeta_DoesQualifierExist_1;
+	WXMPMeta_GetLocalizedText_1;
+	WXMPMeta_SetLocalizedText_1;
+	WXMPMeta_DeleteLocalizedText_1;
+	WXMPMeta_GetProperty_Bool_1;
+	WXMPMeta_GetProperty_Int_1;
+	WXMPMeta_GetProperty_Int64_1;
+	WXMPMeta_GetProperty_Float_1;
+	WXMPMeta_GetProperty_Date_1;
+	WXMPMeta_SetProperty_Bool_1;
+	WXMPMeta_SetProperty_Int_1;
+	WXMPMeta_SetProperty_Int64_1;
+	WXMPMeta_SetProperty_Float_1;
+	WXMPMeta_SetProperty_Date_1;
+	WXMPMeta_GetObjectName_1;
+	WXMPMeta_SetObjectName_1;
+	WXMPMeta_GetObjectOptions_1;
+	WXMPMeta_SetObjectOptions_1;
+	WXMPMeta_Clone_1;
+	WXMPMeta_Sort_1;
+	WXMPMeta_Erase_1;
+	WXMPMeta_CountArrayItems_1;
+	WXMPMeta_DumpObject_1;
+	WXMPMeta_ParseFromBuffer_1;
+	WXMPMeta_SerializeToBuffer_1;
+
+	WXMPMeta_SetDefaultErrorCallback_1;
+	WXMPMeta_SetErrorCallback_1;
+	WXMPMeta_ResetErrorCallbackLimit_1;
+	WXMPMeta_GetXMPDOMFactoryInstance_1;
+
+	WXMPIterator_PropCTor_1;
+	WXMPIterator_TableCTor_1;
+	WXMPIterator_IncrementRefCount_1;
+	WXMPIterator_DecrementRefCount_1;
+	WXMPIterator_Next_1;
+	WXMPIterator_Skip_1;
+
+	WXMPUtils_ComposeArrayItemPath_1;
+	WXMPUtils_ComposeStructFieldPath_1;
+	WXMPUtils_ComposeQualifierPath_1;
+	WXMPUtils_ComposeLangSelector_1;
+	WXMPUtils_ComposeFieldSelector_1;
+	WXMPUtils_ConvertFromBool_1;
+	WXMPUtils_ConvertFromInt_1;
+	WXMPUtils_ConvertFromInt64_1;
+	WXMPUtils_ConvertFromFloat_1;
+	WXMPUtils_ConvertFromDate_1;
+	WXMPUtils_ConvertToBool_1;
+	WXMPUtils_ConvertToInt_1;
+	WXMPUtils_ConvertToInt64_1;
+	WXMPUtils_ConvertToFloat_1;
+	WXMPUtils_ConvertToDate_1;
+	WXMPUtils_CurrentDateTime_1;
+	WXMPUtils_SetTimeZone_1;
+	WXMPUtils_ConvertToUTCTime_1;
+	WXMPUtils_ConvertToLocalTime_1;
+	WXMPUtils_CompareDateTime_1;
+	WXMPUtils_EncodeToBase64_1;
+	WXMPUtils_DecodeFromBase64_1;
+	WXMPUtils_PackageForJPEG_1;
+	WXMPUtils_MergeFromJPEG_1;
+
+	WXMPUtils_CatenateArrayItems_1;
+	WXMPUtils_SeparateArrayItems_1;
+	WXMPUtils_ApplyTemplate_1;
+	WXMPUtils_RemoveProperties_1;
+	WXMPUtils_DuplicateSubtree_1;
+	
+	XMP_NewExpatAdapter;
+
+local:
+
+	*;
+
+};
diff --git a/XMPCore/resource/ohos/expat_config.h b/XMPCore/resource/ohos/expat_config.h
new file mode 100644
index 0000000..52821b5
--- /dev/null
+++ b/XMPCore/resource/ohos/expat_config.h
@@ -0,0 +1,122 @@
+/* expat_config.h.  Generated by configure.  */
+/* expat_config.h.in.  Generated from configure.in by autoheader.  */
+
+/* *** Tweaked by hand for generic UNIX builds **** */
+
+#ifdef WORDS_BIGENDIAN
+	#error "WORDS_BIGENDIAN must be initially undefined"
+#endif
+
+#if TargetOS == i80386linux
+	/* #undef WORDS_BIGENDIAN */
+	#define HAVE_MMAP 1
+	#define HAVE_STDINT_H 1
+	/* #undef const */
+#elif TargetOS == sparcsolaris
+	#define WORDS_BIGENDIAN 1
+	#define HAVE_MMAP 1
+	/* #undef HAVE_STDINT_H */
+	/* #undef const */
+#elif TargetOS == rs60000aix
+	#define WORDS_BIGENDIAN 1
+	/* #undef HAVE_MMAP */
+	/* #undef HAVE_STDINT_H */
+	/* #undef const */
+#elif TargetOS == hppahpux
+	#define WORDS_BIGENDIAN 1
+	/* #undef HAVE_MMAP */
+	/* #undef HAVE_STDINT_H */
+	#define const 
+#elif TargetOS == ia64hpux
+	#define WORDS_BIGENDIAN 1
+	/* #undef HAVE_MMAP */
+	/* #undef HAVE_STDINT_H */
+	#define const 
+#else
+	#error "Unknown target OS"
+#endif
+
+/* 1234 = LIL_ENDIAN, 4321 = BIGENDIAN */
+#if WORDS_BIGENDIAN
+	#define BYTEORDER 4321
+#else
+	#define BYTEORDER 1234
+#endif
+
+#define XML_DEV_URANDOM 1
+
+/* Define to 1 if you have the `bcopy' function. */
+#define HAVE_BCOPY 1
+
+/* Define to 1 if you have the <check.h> header file. */
+/* #undef HAVE_CHECK_H */
+
+/* Define to 1 if you have the <dlfcn.h> header file. */
+#define HAVE_DLFCN_H 1
+
+/* Define to 1 if you have the <fcntl.h> header file. */
+#define HAVE_FCNTL_H 1
+
+/* Define to 1 if you have the `getpagesize' function. */
+#define HAVE_GETPAGESIZE 1
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
+
+/* Define to 1 if you have the `memmove' function. */
+#define HAVE_MEMMOVE 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "expat-bugs@mail.libexpat.org"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "expat"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "expat 2.5.0"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "expat"
+
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "2.5.0"
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Define to specify how much context to retain around the current parse
+   point. */
+#define XML_CONTEXT_BYTES 1024
+
+/* Define to make parameter entity parsing functionality available. */
+/* #define XML_DTD 1 */
+
+/* Define to make XML Namespaces functionality available. */
+#define XML_NS 1
+
+/* Define to `long' if <sys/types.h> does not define. */
+/* #undef off_t */
+
+/* Define to `unsigned' if <sys/types.h> does not define. */
+/* #undef size_t */
diff --git a/XMPCore/source/XMPUtils.cpp b/XMPCore/source/XMPUtils.cpp
index c0f6e41..e7f9090 100644
--- a/XMPCore/source/XMPUtils.cpp
+++ b/XMPCore/source/XMPUtils.cpp
@@ -1240,7 +1240,7 @@ XMP_Index XMPUtils::LookupFieldSelector_v2(const spIArrayNode & arrayNode, XMP_V
 // A bit of hackery to use the best available time functions. Mac, UNIX and iOS have thread safe versions
 // of gmtime and localtime.
 
-#if XMP_MacBuild | XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild
+#if XMP_MacBuild | XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild | XMP_OhosBuild
 
 	typedef time_t			ansi_tt;
 	typedef struct tm		ansi_tm;
diff --git a/XMPFiles/build/CMakeListsCommon.txt b/XMPFiles/build/CMakeListsCommon.txt
index ce3b9c7..a404d73 100644
--- a/XMPFiles/build/CMakeListsCommon.txt
+++ b/XMPFiles/build/CMakeListsCommon.txt
@@ -352,7 +352,7 @@ if(UNIX AND NOT ANDROID)
 			else()
 				add_custom_command (TARGET ${TARGET_NAME}
 					POST_BUILD
-					COMMAND strip ${OUTPUT_DIR}/lib${XMPFILES_LIB}.so
+					COMMAND $<IF:${OHOS},llvm-strip,strip> ${OUTPUT_DIR}/lib${XMPFILES_LIB}.so
 					COMMAND ls -l ${OUTPUT_DIR}/lib${XMPFILES_LIB}.so
 				)
 			endif()
diff --git a/XMPFiles/resource/ohos/XMPFiles.exp b/XMPFiles/resource/ohos/XMPFiles.exp
new file mode 100644
index 0000000..dea14a7
--- /dev/null
+++ b/XMPFiles/resource/ohos/XMPFiles.exp
@@ -0,0 +1,34 @@
+VERSION {
+global:
+
+	WXMPFiles_Initialize_1;
+	WXMPFiles_Initialize_2;
+	WXMPFiles_Terminate_1;
+	WXMPFiles_CTor_1;
+	WXMPFiles_IncrementRefCount_1;
+	WXMPFiles_DecrementRefCount_1;
+	WXMPFiles_GetVersionInfo_1;
+	WXMPFiles_GetFormatInfo_1;
+	WXMPFiles_CheckFileFormat_1;
+	WXMPFiles_CheckPackageFormat_1;
+	WXMPFiles_GetFileModDate_1;
+	WXMPFiles_OpenFile_1;
+	WXMPFiles_CloseFile_1;
+	WXMPFiles_GetFileInfo_1;
+	WXMPFiles_SetAbortProc_1;
+	WXMPFiles_GetXMP_1;
+	WXMPFiles_PutXMP_1;
+	WXMPFiles_CanPutXMP_1;
+	WXMPFiles_SetDefaultProgressCallback_1;
+	WXMPFiles_SetProgressCallback_1;
+	WXMPFiles_SetDefaultErrorCallback_1;
+	WXMPFiles_SetErrorCallback_1;
+	WXMPFiles_ResetErrorCallbackLimit_1;
+	WXMPFiles_GetAssociatedResources_1;
+	WXMPFiles_IsMetadataWritable_1;
+
+local:
+
+	*;
+
+};
diff --git a/XMPFiles/resource/ohos/expat_config.h b/XMPFiles/resource/ohos/expat_config.h
new file mode 100644
index 0000000..52821b5
--- /dev/null
+++ b/XMPFiles/resource/ohos/expat_config.h
@@ -0,0 +1,122 @@
+/* expat_config.h.  Generated by configure.  */
+/* expat_config.h.in.  Generated from configure.in by autoheader.  */
+
+/* *** Tweaked by hand for generic UNIX builds **** */
+
+#ifdef WORDS_BIGENDIAN
+	#error "WORDS_BIGENDIAN must be initially undefined"
+#endif
+
+#if TargetOS == i80386linux
+	/* #undef WORDS_BIGENDIAN */
+	#define HAVE_MMAP 1
+	#define HAVE_STDINT_H 1
+	/* #undef const */
+#elif TargetOS == sparcsolaris
+	#define WORDS_BIGENDIAN 1
+	#define HAVE_MMAP 1
+	/* #undef HAVE_STDINT_H */
+	/* #undef const */
+#elif TargetOS == rs60000aix
+	#define WORDS_BIGENDIAN 1
+	/* #undef HAVE_MMAP */
+	/* #undef HAVE_STDINT_H */
+	/* #undef const */
+#elif TargetOS == hppahpux
+	#define WORDS_BIGENDIAN 1
+	/* #undef HAVE_MMAP */
+	/* #undef HAVE_STDINT_H */
+	#define const 
+#elif TargetOS == ia64hpux
+	#define WORDS_BIGENDIAN 1
+	/* #undef HAVE_MMAP */
+	/* #undef HAVE_STDINT_H */
+	#define const 
+#else
+	#error "Unknown target OS"
+#endif
+
+/* 1234 = LIL_ENDIAN, 4321 = BIGENDIAN */
+#if WORDS_BIGENDIAN
+	#define BYTEORDER 4321
+#else
+	#define BYTEORDER 1234
+#endif
+
+#define XML_DEV_URANDOM 1
+
+/* Define to 1 if you have the `bcopy' function. */
+#define HAVE_BCOPY 1
+
+/* Define to 1 if you have the <check.h> header file. */
+/* #undef HAVE_CHECK_H */
+
+/* Define to 1 if you have the <dlfcn.h> header file. */
+#define HAVE_DLFCN_H 1
+
+/* Define to 1 if you have the <fcntl.h> header file. */
+#define HAVE_FCNTL_H 1
+
+/* Define to 1 if you have the `getpagesize' function. */
+#define HAVE_GETPAGESIZE 1
+
+/* Define to 1 if you have the <inttypes.h> header file. */
+#define HAVE_INTTYPES_H 1
+
+/* Define to 1 if you have the `memmove' function. */
+#define HAVE_MEMMOVE 1
+
+/* Define to 1 if you have the <memory.h> header file. */
+#define HAVE_MEMORY_H 1
+
+/* Define to 1 if you have the <stdlib.h> header file. */
+#define HAVE_STDLIB_H 1
+
+/* Define to 1 if you have the <strings.h> header file. */
+#define HAVE_STRINGS_H 1
+
+/* Define to 1 if you have the <string.h> header file. */
+#define HAVE_STRING_H 1
+
+/* Define to 1 if you have the <sys/stat.h> header file. */
+#define HAVE_SYS_STAT_H 1
+
+/* Define to 1 if you have the <sys/types.h> header file. */
+#define HAVE_SYS_TYPES_H 1
+
+/* Define to 1 if you have the <unistd.h> header file. */
+#define HAVE_UNISTD_H 1
+
+/* Define to the address where bug reports for this package should be sent. */
+#define PACKAGE_BUGREPORT "expat-bugs@mail.libexpat.org"
+
+/* Define to the full name of this package. */
+#define PACKAGE_NAME "expat"
+
+/* Define to the full name and version of this package. */
+#define PACKAGE_STRING "expat 2.5.0"
+
+/* Define to the one symbol short name of this package. */
+#define PACKAGE_TARNAME "expat"
+
+/* Define to the version of this package. */
+#define PACKAGE_VERSION "2.5.0"
+
+/* Define to 1 if you have the ANSI C header files. */
+#define STDC_HEADERS 1
+
+/* Define to specify how much context to retain around the current parse
+   point. */
+#define XML_CONTEXT_BYTES 1024
+
+/* Define to make parameter entity parsing functionality available. */
+/* #define XML_DTD 1 */
+
+/* Define to make XML Namespaces functionality available. */
+#define XML_NS 1
+
+/* Define to `long' if <sys/types.h> does not define. */
+/* #undef off_t */
+
+/* Define to `unsigned' if <sys/types.h> does not define. */
+/* #undef size_t */
diff --git a/XMPFiles/source/FormatSupport/ISOBaseMedia_Support.cpp b/XMPFiles/source/FormatSupport/ISOBaseMedia_Support.cpp
index b0945cb..8020232 100644
--- a/XMPFiles/source/FormatSupport/ISOBaseMedia_Support.cpp
+++ b/XMPFiles/source/FormatSupport/ISOBaseMedia_Support.cpp
@@ -68,6 +68,12 @@ const XMP_Uns8 * GetBoxInfo ( const XMP_Uns8 * boxPtr, const XMP_Uns8 * boxLimit
 	}
 	
 	u32Size = GetUns32BE ( boxPtr );
+	// Memory barrier to ensure that the size is read before the type.
+	#if defined(_MSC_VER)
+		_ReadWriteBarrier();
+	#elif defined(__GNUC__) || defined(__clang__)
+		asm volatile("" ::: "memory");
+	#endif
 	info->boxType = GetUns32BE ( boxPtr+4 );
 
 	if ( u32Size >= 8 ) {
diff --git a/XMPFiles/source/FormatSupport/PNG_Support.cpp b/XMPFiles/source/FormatSupport/PNG_Support.cpp
index 7922d03..879a243 100644
--- a/XMPFiles/source/FormatSupport/PNG_Support.cpp
+++ b/XMPFiles/source/FormatSupport/PNG_Support.cpp
@@ -229,6 +229,9 @@ namespace PNG_Support
 				XMP_Uns8* bufferLimit = buffer + currentBufferSize;
 				while (true)
 				{
+					if (tempBuffer + 8 > bufferLimit) {
+						break;
+					}
 					chunkLength = GetUns32BE(tempBuffer);
 					chunkType = GetUns32BE(tempBuffer + 4);
 
diff --git a/XMPFiles/source/FormatSupport/QuickTime_Support.cpp b/XMPFiles/source/FormatSupport/QuickTime_Support.cpp
index 2b31d9f..debc157 100644
--- a/XMPFiles/source/FormatSupport/QuickTime_Support.cpp
+++ b/XMPFiles/source/FormatSupport/QuickTime_Support.cpp
@@ -813,7 +813,7 @@ static inline bool IsMacLangKnown ( XMP_Uns16 macLang )
 	XMP_Uns16 macScript = GetMacScript ( macLang );
 	if ( macScript == kNoMacScript ) return false;
 
-	#if XMP_UNIXBuild | XMP_AndroidBuild
+	#if XMP_UNIXBuild | XMP_AndroidBuild | XMP_OhosBuild
 		if ( macScript != ksmRoman ) return false;
 	#elif XMP_WinBuild
 		if ( GetWinCP(macLang) == 0 ) return false;
@@ -836,7 +836,7 @@ bool ConvertToMacLang ( const std::string & utf8Value, XMP_Uns16 macLang, std::s
 	#if XMP_MacBuild
 		XMP_Uns16 macScript = GetMacScript ( macLang );
 		ReconcileUtils::UTF8ToMacEncoding ( macScript, macLang, (XMP_Uns8*)utf8Value.c_str(), utf8Value.size(), macValue );
-	#elif XMP_UNIXBuild | XMP_AndroidBuild
+	#elif XMP_UNIXBuild | XMP_AndroidBuild | XMP_OhosBuild
 		UTF8ToMacRoman ( utf8Value, macValue );
 	#elif XMP_WinBuild
 		UINT winCP = GetWinCP ( macLang );
@@ -862,7 +862,7 @@ bool ConvertFromMacLang ( const std::string & macValue, XMP_Uns16 macLang, std::
 	#if XMP_MacBuild
 		XMP_Uns16 macScript = GetMacScript ( macLang );
 		ReconcileUtils::MacEncodingToUTF8 ( macScript, macLang, (XMP_Uns8*)macValue.c_str(), macValue.size(), utf8Value );
-	#elif XMP_UNIXBuild | XMP_AndroidBuild
+	#elif XMP_UNIXBuild | XMP_AndroidBuild | XMP_OhosBuild
 		MacRomanToUTF8 ( macValue, utf8Value );
 	#elif XMP_WinBuild
 		UINT winCP = GetWinCP ( macLang );
diff --git a/XMPFiles/source/PluginHandler/ModuleUtils.h b/XMPFiles/source/PluginHandler/ModuleUtils.h
index cadbb00..c2c346b 100644
--- a/XMPFiles/source/PluginHandler/ModuleUtils.h
+++ b/XMPFiles/source/PluginHandler/ModuleUtils.h
@@ -18,7 +18,7 @@ typedef HMODULE OS_ModuleRef;
 #include <CoreFoundation/CFBundle.h>
 #include <memory>
 typedef CFBundleRef OS_ModuleRef;
-#elif XMP_UNIXBuild
+#elif XMP_UNIXBuild || XMP_OhosBuild
 # if __clang__
 #include <memory>
 #else
diff --git a/XMPFiles/source/XMPFiles_Impl.cpp b/XMPFiles/source/XMPFiles_Impl.cpp
index f1eb207..37598d9 100644
--- a/XMPFiles/source/XMPFiles_Impl.cpp
+++ b/XMPFiles/source/XMPFiles_Impl.cpp
@@ -38,6 +38,10 @@ using namespace std;
 	#if ! ANDROID_ENV
 		#error "ANDROID_ENV must be defined so that \"#if ANDROID_ENV\" is true"
 	#endif
+#elif defined ( OHOS_ENV )
+	#if ! OHOS_ENV
+		#error "OHOS_ENV must be defined so that \"#if OHOS_ENV\" is true"
+	#endif
 #endif
 
 // =================================================================================================
diff --git a/build/CMakeLists.txt b/build/CMakeLists.txt
index 81cda5b..2227fca 100644
--- a/build/CMakeLists.txt
+++ b/build/CMakeLists.txt
@@ -77,6 +77,7 @@ include(${XMP_ROOT}/build/XMP_Config.cmake)
 # ==============================================================================
 add_subdirectory(${XMP_ROOT}/XMPCore/build ${XMP_ROOT}/XMPCore/build/${XMP_CMAKEFOLDER_NAME})
 add_subdirectory(${XMP_ROOT}/XMPFiles/build ${XMP_ROOT}/XMPFiles/build/${XMP_CMAKEFOLDER_NAME})
+add_subdirectory(${XMP_ROOT}/samples/build/cmake ${XMP_ROOT}/samples/build/${XMP_CMAKEFOLDER_NAME})
 
 
 # ==============================================================================
diff --git a/build/ProductConfig.cmake b/build/ProductConfig.cmake
index 3f51fa6..d99bb64 100644
--- a/build/ProductConfig.cmake
+++ b/build/ProductConfig.cmake
@@ -102,7 +102,23 @@ if (UNIX)
 	#	set(XMP_SHARED_COMPILE_FLAGS "${XMP_SHARED_COMPILE_FLAGS} -ffast-math")
 	#	set(XMP_SHARED_COMPILE_RELEASE_FLAGS "${XMP_SHARED_COMPILE_RELEASE_FLAGS} -fomit-frame-pointer -funroll-loops")
 	endif()
-
+    elseif(OHOS)
+    	set(XMP_ENABLE_SECURE_SETTINGS "ON")
+    	set(XMP_CPU_FOLDERNAME	"$(ARCHS)")
+    	set(XMP_PLATFORM_SHORT "ohos")
+
+    	add_definitions(-DOHOS_ENV=1)
+    	if(OHOS_ARCH STREQUAL "armeabi-v7a")
+    		add_definitions(-march=armv7-a -mfloat-abi=softfp -mfpu=neon-vfpv4)
+    		set(XMP_PLATFORM_FOLDER "armeabi-v7a-build")
+    	elseif(OHOS_ARCH STREQUAL "arm64-v8a")
+    		add_definitions(-march=armv8-a)
+    		set(XMP_PLATFORM_FOLDER "arm64-v8a-build")
+    	elseif(OHOS_ARCH STREQUAL "x86_64")
+    		add_definitions(-march=x86-64)
+    		set(XMP_PLATFORM_FOLDER "x86_64-build")
+    	endif()
+    	set(XMP_PLATFORM_LINK "-z defs -Xlinker -Bsymbolic -Wl,--no-undefined  ${XMP_EXTRA_LINK_FLAGS} ${XMP_TOOLCHAIN_LINK_FLAGS} -lrt -Wl,--no-as-needed -ldl -lpthread")
     else()
 		if(NOT CMAKE_CROSSCOMPILING)
 			if (${CMAKE_SYSTEM_PROCESSOR} MATCHES "x86_64")
diff --git a/build/shared/SharedConfig.cmake b/build/shared/SharedConfig.cmake
index c7e5fdc..238860c 100644
--- a/build/shared/SharedConfig.cmake
+++ b/build/shared/SharedConfig.cmake
@@ -51,6 +51,8 @@ if (UNIX)
             endif()
 		elseif(ANDROID)
 			include(${COMMON_BUILD_SHARED_DIR}/SharedConfig_Android.cmake)
+            elseif(OHOS)
+		        include(${COMMON_BUILD_SHARED_DIR}/SharedConfig_OHOS.cmake)
         else()
 		    include(${COMMON_BUILD_SHARED_DIR}/SharedConfig_Linux.cmake)
         endif()
diff --git a/build/shared/SharedConfig_OHOS.cmake b/build/shared/SharedConfig_OHOS.cmake
new file mode 100644
index 0000000..2daf494
--- /dev/null
+++ b/build/shared/SharedConfig_OHOS.cmake
@@ -0,0 +1,159 @@
+# =================================================================================================
+# ADOBE SYSTEMS INCORPORATED
+# Copyright 2013 Adobe Systems Incorporated
+# All Rights Reserved
+#
+# NOTICE: Adobe permits you to use, modify, and distribute this file in accordance with the terms
+# of the Adobe license agreement accompanying it.
+# =================================================================================================
+
+# ==============================================================================
+# define minimum cmake version
+# For Android always build with make 3.6
+if(ANDROID)
+	cmake_minimum_required(VERSION 3.5.2)
+else(ANDROID)
+	cmake_minimum_required(VERSION 3.15.5)
+endif(ANDROID)
+
+# ==============================================================================
+# Shared config for linux
+# ==============================================================================
+add_definitions(-DOHOS_ENV=1)
+
+# Linux -------------------------------------------
+
+set(COMMON_PLATFORM_LINK " ${${COMPONENT}_PLATFORM_LINK}")
+set(COMMON_SHARED_COMPILE_FLAGS "-fPIC  ${${COMPONENT}_SHARED_COMPILE_FLAGS} -fexceptions -Wformat -Wformat-security ")
+set(COMMON_SHARED_COMPILE_DEBUG_FLAGS " ${${COMPONENT}_SHARED_COMPILE_DEBUG_FLAGS} -g -DDEBUG=1 -D_DEBUG=1")
+set(COMMON_SHARED_COMPILE_RELEASE_FLAGS "${${COMPONENT}_SHARED_COMPILE_RELEASE_FLAGS} -DNDEBUG=1 -D_NDEBUG=1")
+
+if(NOT ${COMPONENT}_DISABLE_ALL_WARNINGS)
+	set(COMMON_SHARED_COMPILE_FLAGS "${COMMON_SHARED_COMPILE_FLAGS} -Wall")
+endif()
+
+if(${COMPONENT}_ENABLE_SECURE_SETTINGS)
+	set(COMMON_SHARED_COMPILE_FLAGS "${COMMON_SHARED_COMPILE_FLAGS} -fstack-protector -O -D_FORTIFY_SOURCE=2")
+	set(COMMON_PLATFORM_LINK "${COMMON_PLATFORM_LINK} -Wl,-z,relro -Wl,-z,now")
+else()
+	set(COMMON_SHARED_COMPILE_DEBUG_FLAGS "${COMMON_SHARED_COMPILE_FLAGS} -O0")
+	set(COMMON_SHARED_COMPILE_RELEASE_FLAGS "${COMMON_SHARED_COMPILE_FLAGS} -Os")
+endif()
+
+set(CMAKE_C_FLAGS "${COMMON_SHARED_COMPILE_FLAGS} ${${COMPONENT}_EXTRA_C_COMPILE_FLAGS} -Wno-implicit ")
+set(CMAKE_C_FLAGS_DEBUG "${COMMON_SHARED_COMPILE_DEBUG_FLAGS}")
+set(CMAKE_C_FLAGS_RELEASE "${COMMON_SHARED_COMPILE_RELEASE_FLAGS}")
+set(CMAKE_CXX_FLAGS "${COMMON_SHARED_COMPILE_FLAGS} ${COMMON_EXTRA_CXX_COMPILE_FLAGS} -Wno-reorder -std=c++0x")
+set(CMAKE_CXX_FLAGS_DEBUG "${COMMON_SHARED_COMPILE_DEBUG_FLAGS}")
+set(CMAKE_CXX_FLAGS_RELEASE "${COMMON_SHARED_COMPILE_RELEASE_FLAGS}")
+set(COMMON_PLATFORM_BEGIN_WHOLE_ARCHIVE "-Wl,--whole-archive")
+set(COMMON_PLATFORM_END_WHOLE_ARCHIVE "-Wl,--no-whole-archive")
+set(COMMON_DYLIBEXTENSION	"so")
+
+if(NOT CMAKE_BUILD_WITH_INSTALL_RPATH)
+    set(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)
+    set(CMAKE_INSTALL_RPATH $ORIGIN)
+endif()
+
+SetupCompilerFlags()
+SetupGeneralDirectories()
+
+
+# ==============================================================================
+# Functions
+# ==============================================================================
+
+# ==============================================================================
+# Function: Add Mac framework to list of libraries to link to
+# ==============================================================================
+#
+function(AddMacFramework appname fwname)
+	# ignore on linux
+endfunction(AddMacFramework)
+
+# ==============================================================================
+# Function: Set platform specific link flags to target
+# ==============================================================================
+#
+# TODO: make function work on all platforms. Unify with AddMacFramework.
+function(SetPlatformLinkFlags target linkflags libname)
+	set_target_properties(${target} PROPERTIES LINK_FLAGS "${XMP_PLATFORM_LINK} ${linkflags}")
+
+endfunction(SetPlatformLinkFlags)
+
+# ==============================================================================
+# Function: Set the output path depending on isExecutable
+#	The output path is corrected. 
+# ==============================================================================
+#
+function(SetOutputPath2 path targetName targetType)
+	# remove last path item if not makefile
+	if(NOT XMP_IS_MAKEFILE_BUILD)
+		get_filename_component(correctedPath ${path} PATH)
+		#message("SetOutputPath: ${path} to ${correctedPath}")
+	else()
+		set(correctedPath ${path})
+	endif()
+
+	if(${targetType} MATCHES "EXECUTABLE")
+		set_property(TARGET ${targetName} PROPERTY RUNTIME_OUTPUT_DIRECTORY ${correctedPath})
+	elseif(${targetType} MATCHES "DYNAMIC")
+		set_property(TARGET ${targetName} PROPERTY LIBRARY_OUTPUT_DIRECTORY ${correctedPath})
+	else()
+		set_property(TARGET ${targetName} PROPERTY ARCHIVE_OUTPUT_DIRECTORY ${correctedPath})
+	endif()
+endfunction(SetOutputPath2)
+
+# ==============================================================================
+# Function: Set precompiled headers
+# ==============================================================================
+#
+function( SetPrecompiledHeaders target pchHeader pchSource )
+	# Linux
+	# not supported
+endfunction( SetPrecompiledHeaders )
+
+# ==============================================================================
+# Function: Add library in native OS name to variable resultName
+# ==============================================================================
+#
+function(AddLibraryNameInNativeFormat libname libpath resultName)
+	foreach(libname_item ${libname})
+		set(result "${libpath}/lib${libname_item}.a")
+		set(resultList ${resultList} ${result})
+	endforeach()	
+	set(${resultName} ${${resultName}} ${resultList} PARENT_SCOPE)
+	#message("AddLibraryNameInNativeFormat: ${resultList} ")
+endfunction(AddLibraryNameInNativeFormat)
+
+# ==============================================================================
+# Function: Add shared library in native OS name to variable resultName
+# ==============================================================================
+#
+function(AddSharedLibraryNameInNativeFormat libname libpath resultName)
+	foreach(libname_item ${libname})
+		set(result "${libpath}/lib${libname_item}.so")
+		set(resultList ${resultList} ${result})
+	endforeach()	
+	set(${resultName} ${${resultName}} ${resultList} PARENT_SCOPE)
+	#message("AddSharedLibraryNameInNativeFormat: ${resultList} ")
+endfunction(AddSharedLibraryNameInNativeFormat)
+
+# ==============================================================================
+# Function: Add tbb library to variables (resultName and resultNameDebug)
+# ==============================================================================
+#
+function(AddTbbLib resultName resultNameDebug)
+    # not supported under linux
+endfunction(AddTbbLib)
+
+# ==============================================================================
+# Function: Make an OSX bundle
+# ==============================================================================
+# 	Optional parameter (!!)
+#	${ARGV3} = Name of Info.plist located in ${RESOURCE_ROOT}/${XMP_PLATFORM_SHORT}
+#	${ARGV4} = Name of header file to use to generate Info.plist
+#
+function(MakeBundle appname extension outputDir)
+	# not supported under linux
+endfunction(MakeBundle)
diff --git a/public/include/XMPCommon/XMPCommonDefines.h b/public/include/XMPCommon/XMPCommonDefines.h
index 7012a67..ed49203 100644
--- a/public/include/XMPCommon/XMPCommonDefines.h
+++ b/public/include/XMPCommon/XMPCommonDefines.h
@@ -101,6 +101,25 @@
 		#define libcppNULL 0
 	#endif
 
+	#if XMP_OhosBuild
+    #define SUPPORT_STD_ATOMIC_IMPLEMENTATION 1
+    #ifdef _LIBCPP_VERSION
+        #define SUPPORT_SHARED_POINTERS_IN_TR1 0
+        #define SUPPORT_SHARED_POINTERS_IN_STD 1
+        #define libcppNULL nullptr
+        #define SUPPORT_VARIADIC_TEMPLATES 1
+    #else
+        #define SUPPORT_SHARED_POINTERS_IN_TR1 1
+        #define SUPPORT_SHARED_POINTERS_IN_STD 0
+        #define libcppNULL NULL
+        #define SUPPORT_VARIADIC_TEMPLATES 0
+    #endif
+    #define SUPPORT_SHARED_POINTERS_WITH_ALLOCATORS 0
+    #define BAD_EXCEPTION_SUPPORT_STRINGS 1
+    #define VECTOR_SUPPORT_CONST_ITERATOR_FUNCTIONS 1
+
+	#endif
+
 	// =================================================================================================
 	// UNIX Specific Settings
 	// ======================
diff --git a/public/include/XMPCore/XMPCoreDefines.h b/public/include/XMPCore/XMPCoreDefines.h
index 5af5be9..b160b93 100644
--- a/public/include/XMPCore/XMPCoreDefines.h
+++ b/public/include/XMPCore/XMPCoreDefines.h
@@ -58,6 +58,13 @@
 #define ENABLE_CPP_DOM_MODEL 0
 #endif
 
+// =================================================================================================
+// Ohos Specific Settings
+// ======================
+#if XMP_OhosBuild
+#define ENABLE_CPP_DOM_MODEL 0
+#endif
+
 #endif // ENABLE_CPP_DOM_MODEL
 
 #ifndef ENABLE_CPP_DOM_MODEL
diff --git a/public/include/XMP_Const.h b/public/include/XMP_Const.h
index b14d193..9010239 100644
--- a/public/include/XMP_Const.h
+++ b/public/include/XMP_Const.h
@@ -17,7 +17,7 @@
     #include <stdint.h>
 #endif
 //Android has both inttypes and stdint. But inttypes includes stdint plus other functions
-#if XMP_UNIXBuild | XMP_AndroidBuild		// hopefully an inttypes.h on all UNIXes...
+#if XMP_UNIXBuild | XMP_AndroidBuild | XMP_OhosBuild		// hopefully an inttypes.h on all UNIXes...
 		#include <inttypes.h>
 #endif
 
@@ -72,7 +72,7 @@ extern "C" {
     typedef unsigned long XMP_Uns32;
     typedef unsigned long long XMP_Uns64;
 
-#elif XMP_UNIXBuild | XMP_AndroidBuild
+#elif XMP_UNIXBuild | XMP_AndroidBuild | XMP_OhosBuild
 
 	#if ! XMP_64
 
diff --git a/public/include/XMP_Environment.h b/public/include/XMP_Environment.h
index 3be35bc..6f6d808 100644
--- a/public/include/XMP_Environment.h
+++ b/public/include/XMP_Environment.h
@@ -52,8 +52,8 @@
 		#error "WIN_ENV must be defined so that \"#if WIN_ENV\" is true"
 	#endif
 	
-    #if defined ( MAC_ENV ) || defined ( UNIX_ENV ) || defined ( IOS_ENV ) || defined ( ANDROID_ENV )
-		#error "XMP environment error - must define only one of MAC_ENV (or IOS_ENV), WIN_ENV, UNIX_ENV, ANDROID_ENV"
+    #if defined ( MAC_ENV ) || defined ( UNIX_ENV ) || defined ( IOS_ENV ) || defined ( ANDROID_ENV ) || defined ( OHOS_ENV )
+		#error "XMP environment error - must define only one of MAC_ENV (or IOS_ENV), WIN_ENV, UNIX_ENV, ANDROID_ENV, OHOS_ENV"
     #endif
 
     #define XMP_MacBuild  0
@@ -73,8 +73,8 @@
 		#error "UNIX_ENV must be defined so that \"#if UNIX_ENV\" is true"
 	#endif
 	
-	#if defined ( MAC_ENV ) || defined ( WIN_ENV ) || defined ( IOS_ENV ) || defined ( ANDROID_ENV )
-		#error "XMP environment error - must define only one of MAC_ENV (or IOS_ENV), WIN_ENV, UNIX_ENV, ANDROID_ENV"
+	#if defined ( MAC_ENV ) || defined ( WIN_ENV ) || defined ( IOS_ENV ) || defined ( ANDROID_ENV ) || defined ( OHOS_ENV )
+		#error "XMP environment error - must define only one of MAC_ENV (or IOS_ENV), WIN_ENV, UNIX_ENV, ANDROID_ENV, OHOS_ENV"
 	#endif
 
     #define XMP_MacBuild  0
@@ -91,8 +91,8 @@
 		#error "IOS_ENV must be defined so that \"#if IOS_ENV\" is true"
 	#endif
 
-	#if defined ( WIN_ENV ) || defined ( UNIX_ENV ) || defined ( ANDROID_ENV )
-		#error "XMP environment error - must define only one of IOS_ENV, WIN_ENV, UNIX_ENV, ANDROID_ENV"
+	#if defined ( WIN_ENV ) || defined ( UNIX_ENV ) || defined ( ANDROID_ENV ) || defined ( OHOS_ENV )
+		#error "XMP environment error - must define only one of IOS_ENV, WIN_ENV, UNIX_ENV, ANDROID_ENV, OHOS_ENV"
 	#endif
 
 	#define XMP_MacBuild  0
@@ -110,8 +110,8 @@
 		#error "ANDROID_ENV must be defined so that \"#if ANDROID_ENV\" is true"
 	#endif
 	
-	#if defined ( MAC_ENV ) || defined ( WIN_ENV ) || defined ( IOS_ENV )
-		#error "XMP environment error - must define only one of MAC_ENV (or IOS_ENV), WIN_ENV, UNIX_ENV, ANDROID_ENV"
+	#if defined ( MAC_ENV ) || defined ( WIN_ENV ) || defined ( IOS_ENV ) || defined ( OHOS_ENV )
+		#error "XMP environment error - must define only one of MAC_ENV (or IOS_ENV), WIN_ENV, UNIX_ENV, ANDROID_ENV, OHOS_ENV"
 	#endif
 
     #define XMP_MacBuild  0
@@ -119,6 +119,22 @@
     #define XMP_UNIXBuild 0
 	#define XMP_iOSBuild  0
 	#define XMP_AndroidBuild  1
+#elif defined ( OHOS_ENV )
+
+    #if 0	// ! maybe someday - ! UNIX_ENV
+		#error "OHOS_ENV must be defined so that \"#if OHOS_ENV\" is true"
+	#endif
+	
+	#if defined ( MAC_ENV ) || defined ( WIN_ENV ) || defined ( IOS_ENV ) || defined ( ANDROID_ENV )
+		#error "XMP environment error - must define only one of MAC_ENV (or IOS_ENV), WIN_ENV, UNIX_ENV, OHOS_ENV"
+	#endif
+
+    #define XMP_MacBuild  0
+    #define XMP_WinBuild  0
+    #define XMP_UNIXBuild 0
+	#define XMP_iOSBuild  0
+	#define XMP_AndroidBuild  0
+	#define XMP_OhosBuild  1
 
 #else
 
@@ -184,7 +200,7 @@
 // =================================================================================================
 // UNIX Specific Settings
 // ======================
-#if (XMP_UNIXBuild) | (XMP_AndroidBuild)
+#if (XMP_UNIXBuild) | (XMP_AndroidBuild) | (XMP_OhosBuild)
 	#define XMP_HELPER_DLL_IMPORT
 	#define XMP_HELPER_DLL_EXPORT __attribute__ ((visibility ("default")))
 	#define XMP_HELPER_DLL_PRIVATE __attribute__ ((visibility ("hidden")))
diff --git a/samples/build/cmake/CMakeListsCommonSDK.txt b/samples/build/cmake/CMakeListsCommonSDK.txt
index 73f1578..c91bb9d 100644
--- a/samples/build/cmake/CMakeListsCommonSDK.txt
+++ b/samples/build/cmake/CMakeListsCommonSDK.txt
@@ -18,6 +18,9 @@ endif(ANDROID)
 SET(CMAKE_CONFIGURATION_TYPES "Debug;Release" CACHE STRING "Configurations" FORCE)
 #This projects relative path to XMP Root
 
+remove_definitions(-DENABLE_CPP_DOM_MODEL=1)
+remove_definitions(-DENABLE_CPP_DOM_MODEL=0)
+
 # Set the project name according to target
 if(CMAKE_CL_64)
 	set(IS64BIT "TRUE")
diff --git a/samples/build/cmake/CustomSchema/CMakeLists.txt b/samples/build/cmake/CustomSchema/CMakeLists.txt
index faaf454..a7be19e 100644
--- a/samples/build/cmake/CustomSchema/CMakeLists.txt
+++ b/samples/build/cmake/CustomSchema/CMakeLists.txt
@@ -67,7 +67,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )  
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT})
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore)
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT})
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/CustomSchemaNewDOM/CMakeLists.txt b/samples/build/cmake/CustomSchemaNewDOM/CMakeLists.txt
index 508bab7..94bbc6b 100644
--- a/samples/build/cmake/CustomSchemaNewDOM/CMakeLists.txt
+++ b/samples/build/cmake/CustomSchemaNewDOM/CMakeLists.txt
@@ -74,7 +74,11 @@ else(STATIC)
        			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore)
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT})
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/DumpFile/CMakeListsCommon.txt b/samples/build/cmake/DumpFile/CMakeListsCommon.txt
index a06d804..a6c55b1 100644
--- a/samples/build/cmake/DumpFile/CMakeListsCommon.txt
+++ b/samples/build/cmake/DumpFile/CMakeListsCommon.txt
@@ -56,7 +56,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/DumpMainXMP/CMakeLists.txt b/samples/build/cmake/DumpMainXMP/CMakeLists.txt
index 9984172..0c9e678 100644
--- a/samples/build/cmake/DumpMainXMP/CMakeLists.txt
+++ b/samples/build/cmake/DumpMainXMP/CMakeLists.txt
@@ -66,7 +66,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/DumpScannedXMP/CMakeLists.txt b/samples/build/cmake/DumpScannedXMP/CMakeLists.txt
index 6970c9a..f548403 100644
--- a/samples/build/cmake/DumpScannedXMP/CMakeLists.txt
+++ b/samples/build/cmake/DumpScannedXMP/CMakeLists.txt
@@ -68,7 +68,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/ModifyingXMP/CMakeLists.txt b/samples/build/cmake/ModifyingXMP/CMakeLists.txt
index bd163bb..70b9d49 100644
--- a/samples/build/cmake/ModifyingXMP/CMakeLists.txt
+++ b/samples/build/cmake/ModifyingXMP/CMakeLists.txt
@@ -68,7 +68,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )     
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/ModifyingXMPNewDOM/CMakeLists.txt b/samples/build/cmake/ModifyingXMPNewDOM/CMakeLists.txt
index cb50a41..c14ced6 100644
--- a/samples/build/cmake/ModifyingXMPNewDOM/CMakeLists.txt
+++ b/samples/build/cmake/ModifyingXMPNewDOM/CMakeLists.txt
@@ -73,7 +73,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/ReadingXMP/CMakeLists.txt b/samples/build/cmake/ReadingXMP/CMakeLists.txt
index e042d81..9f0dcda 100644
--- a/samples/build/cmake/ReadingXMP/CMakeLists.txt
+++ b/samples/build/cmake/ReadingXMP/CMakeLists.txt
@@ -68,7 +68,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME}  ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/ReadingXMPNewDOM/CMakeLists.txt b/samples/build/cmake/ReadingXMPNewDOM/CMakeLists.txt
index 2599385..8ab308b 100644
--- a/samples/build/cmake/ReadingXMPNewDOM/CMakeLists.txt
+++ b/samples/build/cmake/ReadingXMPNewDOM/CMakeLists.txt
@@ -76,7 +76,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME}  ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT})
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/SharedConfigSDK.cmake b/samples/build/cmake/SharedConfigSDK.cmake
index 74122f8..2414d85 100644
--- a/samples/build/cmake/SharedConfigSDK.cmake
+++ b/samples/build/cmake/SharedConfigSDK.cmake
@@ -67,7 +67,15 @@ if(UNIX)
     set(CMAKE_CXX_FLAGS_RELEASE "-O3 -DNDEBUG=1")
 
 	set(CMAKE_C_FLAGS "")
-  else(APPLE)
+  elseif(OHOS)
+	# OHOS -------------------------------------------
+	set(PLATFORM_FOLDER "${OHOS_ARCH}-build")
+	set(XMPCORE_LIB "libXMPCore")
+	set(XMPFILES_LIB "libXMPFiles")
+	set(LIB_EXT ".so")	
+	add_definitions(-DOHOS_ENV=1)	
+
+  else()
 	# Linux -------------------------------------------
 	if(STATIC)
 		set(BUILD_FOLDER "gcc4")	
@@ -92,7 +100,7 @@ if(UNIX)
     set(CMAKE_CXX_FLAGS "${CXX_FLAGS} -Wno-ctor-dtor-privacy -fPIC -funsigned-char -fexceptions -Wno-multichar -Wno-implicit")
     set(CMAKE_CXX_FLAGS_DEBUG "-O0 -DDEBUG=1 -D_DEBUG=1")
     set(CMAKE_CXX_FLAGS_RELEASE "-O3 -DNDEBUG=1")
-  endif(APPLE)
+  endif()
 else(UNIX)
   if(WIN32)
   
diff --git a/samples/build/cmake/XMPCommand/CMakeListsCommon.txt b/samples/build/cmake/XMPCommand/CMakeListsCommon.txt
index 22cc1f1..aca9458 100644
--- a/samples/build/cmake/XMPCommand/CMakeListsCommon.txt
+++ b/samples/build/cmake/XMPCommand/CMakeListsCommon.txt
@@ -61,7 +61,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/XMPCoreCoverage/CMakeLists.txt b/samples/build/cmake/XMPCoreCoverage/CMakeLists.txt
index 7e51548..e91186f 100644
--- a/samples/build/cmake/XMPCoreCoverage/CMakeLists.txt
+++ b/samples/build/cmake/XMPCoreCoverage/CMakeLists.txt
@@ -66,7 +66,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )
diff --git a/samples/build/cmake/XMPFilesCoverage/CMakeLists.txt b/samples/build/cmake/XMPFilesCoverage/CMakeLists.txt
index 58c015a..2c35a87 100644
--- a/samples/build/cmake/XMPFilesCoverage/CMakeLists.txt
+++ b/samples/build/cmake/XMPFilesCoverage/CMakeLists.txt
@@ -66,7 +66,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )		
diff --git a/samples/build/cmake/XMPIterations/CMakeLists.txt b/samples/build/cmake/XMPIterations/CMakeLists.txt
index 39d865c..242307e 100644
--- a/samples/build/cmake/XMPIterations/CMakeLists.txt
+++ b/samples/build/cmake/XMPIterations/CMakeLists.txt
@@ -67,7 +67,11 @@ else(STATIC)
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR}/${XMP_BUILDMODE_DIR} )
 		else(APPLE) #For Linux
 			SetPlatformLinkFlags(${PROJECT_NAME} "" "")
-			target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			if(OHOS)
+				target_link_libraries(${PROJECT_NAME} XMPCore XMPFiles )
+			else(OHOS)
+				target_link_libraries(${PROJECT_NAME} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPCORE_LIB}${LIB_EXT} ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR}/${XMPFILES_LIB}${LIB_EXT} )
+			endif(OHOS)
 			set(OUTPUT_DIR ${SAMPLE_SOURCE_ROOT}/../target/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ) 
 			set(EXECUTABLE_OUTPUT_PATH ${OUTPUT_DIR})		
 			add_custom_command (TARGET ${PROJECT_NAME} COMMAND ${CMAKE_COMMAND} -E copy_directory ${XMP_ROOT}/public/libraries/${PLATFORM_FOLDER}/${XMP_BUILDMODE_DIR} ${OUTPUT_DIR} )			
diff --git a/samples/source/XMPFilesCoverage.cpp b/samples/source/XMPFilesCoverage.cpp
index b4ccec1..6bd7161 100644
--- a/samples/source/XMPFilesCoverage.cpp
+++ b/samples/source/XMPFilesCoverage.cpp
@@ -301,6 +301,20 @@ extern "C" int main ( int argc, const char * argv[] )
 		
 		DumpHandlerInfo();
 	
+#if OHOS_ENV
+		TestOneFile ( "../../../testfiles/BlueSquare.ai" );
+		TestOneFile ( "../../../testfiles/BlueSquare.eps" );
+		TestOneFile ( "../../../testfiles/BlueSquare.indd" );
+		TestOneFile ( "../../../testfiles/BlueSquare.jpg" );
+		TestOneFile ( "../../../testfiles/BlueSquare.pdf" );
+		TestOneFile ( "../../../testfiles/BlueSquare.psd" );
+		TestOneFile ( "../../../testfiles/BlueSquare.tif" );
+		TestOneFile ( "../../../testfiles/BlueSquare.avi" );
+		TestOneFile ( "../../../testfiles/BlueSquare.mov" );
+		TestOneFile ( "../../../testfiles/BlueSquare.mp3" );
+		TestOneFile ( "../../../testfiles/BlueSquare.wav" );
+		TestOneFile ( "../../../testfiles/BlueSquare.png" );
+#else
 		TestOneFile ( "../../../../testfiles/BlueSquare.ai" );
 		TestOneFile ( "../../../../testfiles/BlueSquare.eps" );
 		TestOneFile ( "../../../../testfiles/BlueSquare.indd" );
@@ -313,6 +327,7 @@ extern "C" int main ( int argc, const char * argv[] )
 		TestOneFile ( "../../../../testfiles/BlueSquare.mp3" );
 		TestOneFile ( "../../../../testfiles/BlueSquare.wav" );
 		TestOneFile ( "../../../../testfiles/BlueSquare.png" );
+#endif
 
 	} catch ( XMP_Error & excep ) {
 
diff --git a/samples/source/common/LargeFileAccess.cpp b/samples/source/common/LargeFileAccess.cpp
index 4940721..f048981 100644
--- a/samples/source/common/LargeFileAccess.cpp
+++ b/samples/source/common/LargeFileAccess.cpp
@@ -561,7 +561,7 @@ void LFA_Throw ( const char* msg, int id )
 // LFA implementations for POSIX
 // =============================
 
-#if XMP_UNIXBuild || XMP_iOSBuild || XMP_AndroidBuild
+#if XMP_UNIXBuild || XMP_iOSBuild || XMP_AndroidBuild || XMP_OhosBuild
 
 	// ---------------------------------------------------------------------------------------------
 
diff --git a/samples/source/common/globals.h b/samples/source/common/globals.h
index 0de8124..cc1bc69 100644
--- a/samples/source/common/globals.h
+++ b/samples/source/common/globals.h
@@ -17,13 +17,13 @@
 	#include <cstdio>
 
 	//sanity check platform/endianess
-	#if !defined(WIN_ENV) && !defined(MAC_ENV) && !defined(UNIX_ENV) && !defined(IOS_ENV) && !defined(ANDROID_ENV)
+	#if !defined(WIN_ENV) && !defined(MAC_ENV) && !defined(UNIX_ENV) && !defined(IOS_ENV) && !defined(ANDROID_ENV) && !defined(OHOS_ENV)
 		#error "XMP environment error - must define one of MAC_ENV, WIN_ENV, UNIX_ENV or IOS_ENV or ANDROID_ENV"
 	#endif
 
 	#ifdef WIN_ENV
 		#define XMPQE_LITTLE_ENDIAN 1
-	#elif (defined(MAC_ENV) || defined(UNIX_ENV) || defined(IOS_ENV)) || defined(ANDROID_ENV)
+	#elif (defined(MAC_ENV) || defined(UNIX_ENV) || defined(IOS_ENV)) || defined(ANDROID_ENV) || defined(OHOS_ENV)
 		#if __BIG_ENDIAN__
 			#define XMPQE_BIG_ENDIAN 1
 		#elif __LITTLE_ENDIAN__
diff --git a/source/EndianUtils.hpp b/source/EndianUtils.hpp
index 48d9281..70d4e4f 100644
--- a/source/EndianUtils.hpp
+++ b/source/EndianUtils.hpp
@@ -53,6 +53,14 @@
 			#error "Must define kBigEndianHost as 0 or 1 in the makefile."
 		#endif
 	#endif
+#elif XMP_OhosBuild
+    #if __BYTE_ORDER__ == __ORDER_BIG_ENDIAN__
+        #define kBigEndianHost 1
+    #elif __BYTE_ORDER__ == __ORDER_LITTLE_ENDIAN__
+        #define kBigEndianHost 0
+    #else
+        #error "Neither __BIG_ENDIAN__ nor __LITTLE_ENDIAN__ is set"
+    #endif
 #else
 	#error "Unknown build environment"
 #endif
diff --git a/source/Host_IO-POSIX.cpp b/source/Host_IO-POSIX.cpp
index 88bdd19..92a9ddb 100644
--- a/source/Host_IO-POSIX.cpp
+++ b/source/Host_IO-POSIX.cpp
@@ -30,7 +30,7 @@
 // Host_IO implementations for POSIX
 // =================================
 
-#if (! XMP_MacBuild) & (! XMP_UNIXBuild) & (! XMP_iOSBuild) & (! XMP_AndroidBuild)
+#if (! XMP_MacBuild) & (! XMP_UNIXBuild) & (! XMP_iOSBuild) & (! XMP_AndroidBuild) & (! XMP_OhosBuild)
 	#error "This is the POSIX implementation of Host_IO for Mac, iOS , Android and general UNIX."
 #endif
 
diff --git a/source/Host_IO.hpp b/source/Host_IO.hpp
index 1cdb3c2..f031952 100644
--- a/source/Host_IO.hpp
+++ b/source/Host_IO.hpp
@@ -21,7 +21,7 @@
 #elif XMP_MacBuild
 	#include <CoreServices/CoreServices.h>
 	#include <dirent.h>	// Mac uses the POSIX folder functions.
-#elif XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild
+#elif XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild | XMP_OhosBuild
 	#include <dirent.h>
 #else
 	#error "Unknown host platform."
@@ -103,7 +103,7 @@ namespace Host_IO {
 		typedef int FileRef;
 		static const FileRef noFileRef = -1;
 		typedef off64_t XMP_off_t;
-	#elif XMP_MacBuild | XMP_UNIXBuild | XMP_iOSBuild
+	#elif XMP_MacBuild | XMP_UNIXBuild | XMP_iOSBuild | XMP_OhosBuild
 		typedef int FileRef;
 		static const FileRef noFileRef = -1;
 		typedef off_t XMP_off_t;
@@ -170,7 +170,7 @@ namespace Host_IO {
 	#elif XMP_MacBuild
 		typedef DIR* FolderRef;
 		static const FolderRef noFolderRef = 0;
-	#elif XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild
+	#elif XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild | XMP_OhosBuild
 		typedef DIR* FolderRef;
 		static const FolderRef noFolderRef = 0;
 	#endif
diff --git a/source/PerfUtils.cpp b/source/PerfUtils.cpp
index f4636b2..84192ff 100644
--- a/source/PerfUtils.cpp
+++ b/source/PerfUtils.cpp
@@ -75,7 +75,7 @@ double PerfUtils::GetElapsedSeconds ( PerfUtils::MomentValue start, PerfUtils::M
 
 // =================================================================================================
 
-#if XMP_UNIXBuild | XMP_AndroidBuild
+#if XMP_UNIXBuild | XMP_AndroidBuild | XMP_OhosBuild
 
 const char * PerfUtils::GetTimerInfo()
 {
diff --git a/source/PerfUtils.hpp b/source/PerfUtils.hpp
index 5df1bc8..fa88791 100644
--- a/source/PerfUtils.hpp
+++ b/source/PerfUtils.hpp
@@ -15,7 +15,7 @@
 	#include <CoreServices/CoreServices.h>
 #elif XMP_WinBuild
 	#include <Windows.h>
-#elif XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild
+#elif XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild | XMP_OhosBuild
 	#include <time.h>
 #endif
 
@@ -25,7 +25,7 @@ namespace PerfUtils {
 //		typedef LARGE_INTEGER MomentValue;
 		typedef LONGLONG MomentValue;
 		static const MomentValue kZeroMoment = 0;
-	#elif XMP_UNIXBuild | XMP_AndroidBuild
+	#elif XMP_UNIXBuild | XMP_AndroidBuild | XMP_OhosBuild
 		typedef struct timespec MomentValue;
 		static const MomentValue kZeroMoment = {0, 0};
 	#elif XMP_iOSBuild | XMP_MacBuild
diff --git a/source/XMP_LibUtils.cpp b/source/XMP_LibUtils.cpp
index bca3cb7..6567d24 100644
--- a/source/XMP_LibUtils.cpp
+++ b/source/XMP_LibUtils.cpp
@@ -132,7 +132,7 @@ void XMP_ReadWriteLock::Release()
 
 #if UseHomeGrownLock
 
-	#if XMP_MacBuild | XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild
+	#if XMP_MacBuild | XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild | XMP_OhosBuild
 
 		// -----------------------------------------------------------------------------------------
 
diff --git a/source/XMP_LibUtils.hpp b/source/XMP_LibUtils.hpp
index c9fd002..f4053f6 100644
--- a/source/XMP_LibUtils.hpp
+++ b/source/XMP_LibUtils.hpp
@@ -261,7 +261,7 @@ struct ErrorCallbackBox
 	#define AcquireBasicMutex(mutex)	{ int err = pthread_mutex_lock ( &mutex ); XMP_Enforce ( err == 0 ); }
 	#define ReleaseBasicMutex(mutex)	{ int err = pthread_mutex_unlock ( &mutex ); XMP_Enforce ( err == 0 ); }
 
-#elif XMP_UNIXBuild || XMP_AndroidBuild
+#elif XMP_UNIXBuild || XMP_AndroidBuild || XMP_OhosBuild
 
 	#include <pthread.h>
 
@@ -390,7 +390,7 @@ private:
 	#define XMP_BasicRWLock_ReleaseFromRead(lck)	lck.ReleaseFromRead()
 	#define XMP_BasicRWLock_ReleaseFromWrite(lck)	lck.ReleaseFromWrite()
 	
-	#if XMP_MacBuild | XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild
+	#if XMP_MacBuild | XMP_UNIXBuild | XMP_iOSBuild | XMP_AndroidBuild | XMP_OhosBuild
 
 		#include <pthread.h>
 
