diff -urN g3log-1.3_old/Build.cmake g3log-1.3/Build.cmake
--- g3log-1.3_old/Build.cmake	2017-03-30 01:25:23.000000000 +0800
+++ g3log-1.3/Build.cmake	2024-10-09 22:23:32.850081312 +0800
@@ -36,7 +36,7 @@
        ENDIF()
    ELSEIF (APPLE)
        set(PLATFORM_LINK_LIBRIES c++abi)
-   ELSEIF (NOT (${CMAKE_SYSTEM_NAME} STREQUAL "Linux"))
+   ELSEIF (NOT (${CMAKE_SYSTEM_NAME} STREQUAL "Linux" OR ${CMAKE_SYSTEM_NAME} STREQUAL "OHOS"))
        set(PLATFORM_LINK_LIBRIES rt c++abi)
    ELSE()
        set(PLATFORM_LINK_LIBRIES rt)
diff -urN g3log-1.3_old/CMakeLists.txt g3log-1.3/CMakeLists.txt
--- g3log-1.3_old/CMakeLists.txt	2017-03-30 01:25:23.000000000 +0800
+++ g3log-1.3/CMakeLists.txt	2024-10-09 22:22:21.066197648 +0800
@@ -45,6 +45,30 @@
 #   otherwise just run:   "make -j"
 #
 # ============================================================================
+#测试需要googletest，以下内容为解压并注册googletest
+get_filename_component(PROJECT_SOURCE_DIR "${CMAKE_SOURCE_DIR}" REALPATH)
+# 设置gtest zip文件的绝对路径
+set(GTEST_ZIP "${PROJECT_SOURCE_DIR}/3rdParty/gtest/gtest-1.7.0.zip")
+# 检查gtest压缩包是否存在
+if(EXISTS ${GTEST_ZIP})
+    message("Found gtest zip file: ${GTEST_ZIP}")
+    # 创建一个目录来解压gtest
+    set(GTEST_DIR "${PROJECT_SOURCE_DIR}/3rdParty/gtest")
+    file(MAKE_DIRECTORY ${GTEST_DIR})
+
+    # 解压gtest压缩包
+    execute_process(COMMAND ${CMAKE_COMMAND} -E tar xzf ${GTEST_ZIP}
+                    WORKING_DIRECTORY ${GTEST_DIR}
+                    RESULT_VARIABLE UNZIP_RESULT)
+    if(UNZIP_RESULT)
+        message(FATAL_ERROR "Failed to unzip ${GTEST_ZIP}")
+    endif()
+
+    # 添加gtest子目录
+    add_subdirectory(${GTEST_DIR})
+else()
+    message(FATAL_ERROR "gtest zip file not found: ${GTEST_ZIP}")
+endif()
 
 cmake_minimum_required (VERSION 3.1)
 ENABLE_LANGUAGE(CXX)
@@ -112,7 +136,7 @@
 
 
 
-IF(${CMAKE_SYSTEM_NAME} MATCHES "Linux" OR ${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
+IF(${CMAKE_SYSTEM_NAME} MATCHES "Linux" OR ${CMAKE_SYSTEM_NAME} MATCHES "OHOS" OR ${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
    # ==========================================================================
    # BETA : package manager for G3Log,. not yet reliable. Use at your own risk
    #        only tested on Ubuntu and CentOS
diff -urN g3log-1.3_old/test_performance/Performance.cmake g3log-1.3/test_performance/Performance.cmake

--- g3log-1.3_old/test_unit/Test.cmake	2017-03-30 01:25:23.000000000 +0800
+++ g3log-1.3/test_unit/Test.cmake	2024-10-09 22:18:16.083246081 +0800
@@ -64,6 +64,8 @@
            set_target_properties(${test} PROPERTIES COMPILE_FLAGS "-isystem -pthread ")
         ENDIF( NOT(MSVC)) 
         target_link_libraries(${test} g3logger gtest_170_lib)
+        # 添加测试
+        add_test(NAME ${test} COMMAND ${test})
       ENDFOREACH(test)
    
     #